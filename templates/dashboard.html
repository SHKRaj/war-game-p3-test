{% extends "base.html" %}

{% block title %}War Command Dashboard{% endblock %}

{% block head %}
  {{ super() }}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
{% endblock %}


{% block content %}
<h1>Strategic Command Interface</h1>

<div id="dashboard-content">
  <!-- ðŸ§  Intelligence Overview FIRST -->
  <section id="intel-output"></section>

  <!-- ðŸ’¼ Contracts -->
  <section class="control-section">
    <h2>Contracts</h2>
    <div id="contracts-section" class="control-grid"></div>
    <button id="save-contracts">Save Contracts</button>
  </section>

  <!-- ðŸ›ï¸ Policies -->
  <section class="control-section">
    <h2>Policies</h2>
    <div id="policies-section" class="control-grid"></div>
    <button id="save-policies">Save Policies</button>
  </section>
</div>

<!-- Alerts Modal -->
<div id="alerts-modal" class="modal">
  <div class="modal-content">
    <span id="close-alerts" class="close-btn">&times;</span>
    <h2>Strategic Alerts</h2>
    <div id="alerts-body"></div>
  </div>
</div>

<button id="open-alerts" class="floating-btn">ðŸ’¡ Alerts</button>
{% endblock %}

{% block scripts %}
<script>
  document.body.classList.add("dashboard");
  document.body.dataset.playercode = "{{ playercode }}";
  const script = document.createElement("script");
  script.src = "{{ url_for('static', filename='js/playercode.js') }}?v=" + Date.now();
  script.onload = () => {
    if (window.initDashboard) window.initDashboard();
  };
  document.body.appendChild(script);
</script>
{% endblock %}
